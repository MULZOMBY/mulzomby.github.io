
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.8.4/TweenMax.min.js"></script>

<style>
.pagination-bar {
  margin-top: 100px;
  margin-bottom: 20px;
    position: relative;
    width: 100%;
    padding-top: 2px;
    background-color: #c2c7d0;
  }
 .pagination-indicator {
    position: absolute;
    width: 0;
    padding-top: 2px;
    top: 0;
    left: 0;
    background-color: red;
  }
</style>

<div class="pagination-bar">
<div id="indicator" class="pagination-indicator"></div>
</div>
<button id="feature-prev" type="button" name="button">Back</button>
<button id="feature-next" type="button" name="button">Forward</button>
<button id="feature-autoplay" type="button">Autoplay</button>

<script>

var autoplay = true;

var slider = new TimelineMax()
	.to('#indicator', 0.5, {
		width: '20%',
		ease: Power0.easeOut
	})
	.call(shouldPause)
	.to('#indicator', 0.5, {
		width: '40%',
		ease: Power0.easeOut
	})
	.call(shouldPause)
	.to('#indicator', 0.5, {
		width: '60%',
		ease: Power0.easeOut
	})
	.call(shouldPause)
	.to('#indicator', 0.5, {
		width: '80%',
		ease: Power0.easeOut
	})
	.call(shouldPause)
	.to('#indicator', 0.5, {
		width: '100%',
		ease: Power0.easeOut
	})


$('#feature-next').on('click', function() {
  // Get the current time the playhead is sitting on
  var currTime = slider.time()
  // Skip the playhead a tiny amount so it jumps the .call() method where it is sitting on
  slider.play(currTime + 0.01, true);
  // Turn off the autoplay if playing
  autoplay = false;
});
$('#feature-prev').on('click', function() {
  var currTime = slider.time()
  slider.reverse(currTime - 0.01, true);
  autoplay = false;
});
$('#feature-autoplay').on('click', function() {
  // Changes autoplay variable to be the opposite it currently is right now
  autoplay = !autoplay;
  // Checks to see which direction the timeline should play
  if(slider.reversed()) {
    slider.reverse()
  } else {
    slider.play();    
  }
})


function shouldPause() {
  console.log('is autoplaying?', autoplay);
  if(autoplay === false) {
    slider.pause();
  }
}
</script>