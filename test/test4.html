
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.8.4/TweenMax.min.js"></script>

<style>
body{
  background-color:black;
}

.progress{
  width:555px;
  height:10px;
  margin-top:5px;
}

.red{
  background-color:red; 
}

.white{
  background-color:white;
}

#boxes div{
position:relative;
display:inline-block;
margin:20px;
width:100px;
height:100px;
color:black;
font-size:30px;
line-height:100px;
text-align:center;
font-family: sans-serif;
background: #9af600; /* Old browsers */
background: -moz-linear-gradient(top,  #9af600 0%, #a0fd00 50%, #90e700 51%, #a0fe00 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#9af600), color-stop(50%,#a0fd00), color-stop(51%,#90e700), color-stop(100%,#a0fe00)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #9af600 0%,#a0fd00 50%,#90e700 51%,#a0fe00 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #9af600 0%,#a0fd00 50%,#90e700 51%,#a0fe00 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #9af600 0%,#a0fd00 50%,#90e700 51%,#a0fe00 100%); /* IE10+ */
background: linear-gradient(to bottom,  #9af600 0%,#a0fd00 50%,#90e700 51%,#a0fe00 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9af600', endColorstr='#a0fe00',GradientType=0 ); /* IE6-9 */

-webkit-box-shadow:  0px 0px 10px 2px #a1ff00;
        box-shadow:  0px 0px 10px 2px #a1ff00;  
}
</style>





<div class="progress white"><div id="progress" class="red progress"></div></div>

<div id="boxes">
<div id="box1">box1</div>
<div id="box2">box2</div>
<div id="box3">box3</div>
</div>

<script>
var redProgress = $(".red");
var timelineMax = new TimelineMax({/*REVERSE*/yoyo:false,repeat:0,repeatDelay:0});

function makeTl(num) {
  var tmBox = new TimelineMax({repeat:1, yoyo:true});
  tmBox.to("#box1", /*DURATION*/1, {top:num})
		.to("#box2", 1, {top:num}, "-=0.5")
		.to("#box3", 1, {top:num}, "-=0.5")
  return tmBox;
}

timelineMax.add(makeTl(100))
  .add(makeTl(150))
  .add(makeTl(200))
  .from(".red", timelineMax.duration(), {width:0, ease:Linear.easeNone}, 0).timeScale(2);

</script>